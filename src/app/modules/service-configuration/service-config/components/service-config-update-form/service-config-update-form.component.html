<div class="card-container mb-4">
  <section class="flex justify-between border-b ">
    <div class="flex items-center">
      <h3 class="p-3 font-medium">Thông tin cập nhật dịch vụ"{{name}}"</h3>
    </div>
  </section>
  <form nz-form nzLayout="vertical" [formGroup]="form" (ngSubmit)="save()">
    <div class="grid grid-cols-3 gap-4 mt-3 p-2">
      <div class="flex flex-col">
        <label class="text-sm required mb-2">Mã dịch vụ</label>
        <div class="col-span-6">
          <app-form-control>
            <app-input
              formControlName="serviceCode" [allowClear]="true"></app-input>
          </app-form-control>
        </div>
      </div>
      <div class="flex flex-col">
        <label class="text-sm required mb-2">Tên dịch vụ</label>
        <div class="col-span-6">
          <app-form-control>
            <app-input
              formControlName="serviceName" [allowClear]="true"></app-input>
          </app-form-control>
        </div>
      </div>
      <div class="flex flex-col">
        <label class="text-sm required mb-2">Lĩnh vực</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="businessDomainId"
              [options]="optionBusinessDomain"
              [showSearch]="true" 
              [allowClear]="true"
              (ngModelChange)="changeBD($event)"
              [filterDisableOption]="true"
              ></app-select>
          </app-form-control>
        </div>
      </div> <div class="flex flex-col">
        <label class="text-sm  mb-2" [ngClass]="{ required: required }">Nhóm dịch vụ</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="serviceGroupId"
              [showSearch]="true"
               [allowClear]="true"
              [options]="optionServiceGroup"
              [filterDisableOption]="true"
              ></app-select>
          </app-form-control>
        </div>
      </div> 
      <div class="flex flex-col">
        <label class="text-sm required mb-2">Đối tác</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="globalListDetailId"
               [showSearch]="true" 
               [allowClear]="true"
               [options]="lstPartner"
               [filterDisableOption]="true"
              >
            </app-select>
          </app-form-control>
        </div>
      </div> 
      <div class="flex flex-col">
        <label class="text-sm required mb-2">Điều hướng</label>
        <div class="col-span-6">
          <app-form-control>
            <app-input
              formControlName="screenRedirect" [allowClear]="true" ></app-input>
          </app-form-control>
        </div>
      </div> <div class="flex flex-col">
        <label class="text-sm required mb-2">Loại app</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="appType" 
              [showSearch]="true" 
              [allowClear]="true" 
              [options]="lstAppType"
              [filterDisableOption]="true"
              ></app-select>
          </app-form-control>
        </div>
      </div> 
      <div class="flex flex-col">
        <label class="text-sm  mb-2">Vị trí trên nhóm dịch vụ</label>
        <div class="col-span-6">
          <app-form-control>
            <app-input-number
              formControlName="priority" ></app-input-number>
          </app-form-control>
        </div>
      </div>
      <div class="flex flex-col">
        <label class="text-sm  mb-2">Vị trí trên trang chủ</label>
        <div class="col-span-6">
          <app-form-control>
            <app-input-number
              formControlName="priorityMain"></app-input-number>
          </app-form-control>
        </div>
      </div> 
      <div class="flex flex-col">
        <label class="text-sm required mb-2">Chèn Msisdn</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="isInsertMsisdn" 
              [showSearch]="true" 
              [allowClear]="true" 
              [options]="lstMsisdn"
              [filterDisableOption]="true"
              ></app-select>
          </app-form-control>
        </div>
      </div> <div class="flex flex-col">
        <label class="text-sm required mb-2">Mở ứng dụng trình duyệt</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="isOpenBrowserApp" 
              [showSearch]="true" 
              [allowClear]="true" 
              [options]="lstOpenBrowser"
              [filterDisableOption]="true"
              ></app-select>
          </app-form-control>
        </div>
      </div> <div class="flex flex-col">
        <label class="text-sm required mb-2">Mở popup xác nhận</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="isOpenConfirm" 
              (ngModelChange)="changePopup($event)" 
              [showSearch]="true" 
              [allowClear]="true" 
              [options]="lstOpenPopup"
              [filterDisableOption]="true"
              ></app-select>
          </app-form-control>
        </div>
      </div> 
      <div class="flex flex-col">
        <label class="text-sm mb-2" [ngClass]="{ required: requiredPopupContent }">Nội dung xác nhận</label>
        <div class="col-span-6">
          <app-form-control>
            <app-input
              formControlName="contentConfirm" [allowClear]="true">
            </app-input>
          </app-form-control>
        </div>
      </div>
      <div class="flex flex-col">
        <label class="text-sm required mb-2">Hiển thị trên trang chủ</label>
        <div class="col-span-6">
          <app-form-control>
            <app-select
              formControlName="screenHome" 
              [showSearch]="true" 
              [allowClear]="true" 
              [options]="lstScreenHome"
              [filterDisableOption]="true"
              ></app-select>
          </app-form-control>
        </div>
      </div>
      <div class="flex flex-col">
        <label class="text-sm mb-2">Mô tả</label>
        <div class="col-span-6">
          <app-form-control>
            <app-input
              formControlName="description" [allowClear]="true"></app-input>
          </app-form-control>
        </div>
      </div>
    </div>
    <div class="grid grid-cols-3 gap-4 p-2">
      <div class="col-span-1">
        <div class="flex flex-col">
          <label class="text-sm mb-2">Thông báo</label>
          <div class="col-span-6">
            <app-form-control>
              <app-input
                formControlName="notiService" [allowClear]="true"></app-input>
            </app-form-control>
          </div>
        </div>
        <div class="grid grid-cols-2">
            <div class="flex flex-col mt-3">
              <label class="text-sm required mb-2">Ảnh Icon</label>
              <div class="col-span-6">
              <app-form-control>
                <app-upload
                  formControlName="imageB64"
                  [fileListInit]="form.controls['appIcon'].value"
                ></app-upload>
              </app-form-control>
              </div>
            </div>
            <div class="flex flex-col mt-3">
              <label class="text-sm mb-2">Trạng thái</label>
              <div class="col-span-6">
                <app-form-control>
                  <app-switch
                    formControlName="status"
                    (switchChange)="onSwitchChange($event)"></app-switch>
                </app-form-control>
              </div>
            </div>
          
        </div>
      </div>
      <div class="col-span-2">
        <div class="flex flex-col col-span-2">
          <label class="text-sm required mb-2">Nội dung điều khoản</label>
          <div class="col-span-6">
            <app-form-control>
              <app-textarea
                formControlName="contentCondition" [rows]="3" [maxHeight]="'90px'">
              </app-textarea>
            </app-form-control>
          </div>
        </div>

        <div class="grid grid-cols-2 mt-3">
          <div class="flex flex-col col-span-1">
            <label class="text-sm required mb-2">Hiển thị</label>
            <div class="col-span-6">
              <app-form-control>
                <app-radio-group
                  formControlName="displayType"
                  [options]="optionAccount"
                  (ngModelChange)="changeOption($event)"

                  >
                </app-radio-group>
              </app-form-control>
            </div>
          </div>
          <div class="flex flex-col col-span-1">
            <label class="text-sm mb-2" [ngClass]="{ required: requiredOption }">Danh sách khách hàng</label>
            <div class="col-span-6">
              <app-form-control>
                <app-textarea
                  formControlName="displayFor" [rows]="3" [maxHeight]="'90px'">
                </app-textarea>
              </app-form-control>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="text-right btn-groups mr-1 mt-2">
      <button
        class="rounded mb-3 "
        nz-button
        nzType="default"
        style="min-width: 100px;"
        type="button"
        (click)="cancel()"
      ><span>Quay lại</span>
      </button>

      <button
        class="ml-2 rounded mb-3 mr-1"
        nz-button
        nzType="primary"
        type="submit"
        style="min-width: 100px;"
        [nzLoading]="loading$ | async"
      ><span>Lưu</span>
      </button>
    </div>
  </form>
</div>





